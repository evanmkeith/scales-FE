{"ast":null,"code":"import _asyncToGenerator from\"/Users/evankeith/Documents/FX119/unit-four/deliverables/capstone/scales-FE/scales-fe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/evankeith/Documents/FX119/unit-four/deliverables/capstone/scales-FE/scales-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/evankeith/Documents/FX119/unit-four/deliverables/capstone/scales-FE/scales-fe/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useContext,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{UserContext}from'../../UserContext';import*as spotifyAuthService from'../../api/spotify.auth';import SearchResults from'../../components/SearchResult';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Search(){var _useContext=useContext(UserContext),user=_useContext.user,setUser=_useContext.setUser;var _useState=useState(),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),albums=_useState4[0],setAlbums=_useState4[1];var navigate=useNavigate();var handleSearchSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var accessToken;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();accessToken=user.accessToken;console.log(accessToken);_context.next=5;return spotifyAuthService.getSearch(accessToken,search).then(function(res){setAlbums(res.data.albums);}).catch(function(err){console.log(err);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleSearchSubmit(_x){return _ref.apply(this,arguments);};}();console.log(\"albums: \",albums);var viewAlbum=function viewAlbum(album){navigate('/listen',{state:{album:album}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"search-div\",children:[/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",placeholder:\"search\",value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{id:\"search\",onClick:handleSearchSubmit,children:/*#__PURE__*/_jsx(\"span\",{class:\"material-symbols-outlined\",children:\"search\"})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"search-results\",children:albums.map(function(album){return/*#__PURE__*/_jsx(SearchResults,{album:album,viewAlbum:viewAlbum},album.id);})})]})});}","map":{"version":3,"names":["React","useState","useContext","useEffect","Link","useNavigate","UserContext","spotifyAuthService","SearchResults","Search","user","setUser","search","setSearch","albums","setAlbums","navigate","handleSearchSubmit","e","preventDefault","accessToken","console","log","getSearch","then","res","data","catch","err","viewAlbum","album","state","target","value","map","id"],"sources":["/Users/evankeith/Documents/FX119/unit-four/deliverables/capstone/scales-FE/scales-fe/src/pages/Search/index.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport {Link, useNavigate} from 'react-router-dom';\nimport { UserContext } from '../../UserContext';\nimport * as spotifyAuthService from '../../api/spotify.auth';\nimport SearchResults from '../../components/SearchResult';\n\nexport default function Search() {\n    const { user, setUser } = useContext(UserContext);\n    const [ search, setSearch ] = useState();\n    const [ albums, setAlbums ] = useState([]);\n    const navigate = useNavigate();\n\n    const handleSearchSubmit = async(e) => {\n        e.preventDefault();\n        const accessToken = user.accessToken;\n        console.log(accessToken)\n        await spotifyAuthService.getSearch(accessToken, search).then((res) => {\n            setAlbums(res.data.albums);\n        }).catch((err) => {console.log(err)})\n    }\n    console.log(\"albums: \",albums);\n\n    const viewAlbum = (album) => {\n        navigate('/listen', {state: {album}});\n    }\n\n    return (\n        <>\n\n            <div id='search-div'>\n                <form>\n                    <input type='text' name='search' placeholder='search' value={search} onChange={e => setSearch(e.target.value)}/> \n                    <button id='search'\n                        onClick={handleSearchSubmit}\n                        >\n                        <span class=\"material-symbols-outlined\">\n                            search\n                        </span>\n                    </button>\n                </form>\n                <div id='search-results'>\n                    {albums.map((album) => {\n                        return (\n                            <SearchResults album={album} key={album.id} viewAlbum={viewAlbum}/> \n                        )\n                    })}\n                </div>\n            </div>\n        </>\n    )\n}"],"mappings":"igBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,OAAQC,IAAR,CAAcC,WAAd,KAAgC,kBAAhC,CACA,OAASC,WAAT,KAA4B,mBAA5B,CACA,MAAO,GAAKC,CAAAA,kBAAZ,KAAoC,wBAApC,CACA,MAAOC,CAAAA,aAAP,KAA0B,+BAA1B,C,6IAEA,cAAe,SAASC,CAAAA,MAAT,EAAkB,CAC7B,gBAA0BP,UAAU,CAACI,WAAD,CAApC,CAAQI,IAAR,aAAQA,IAAR,CAAcC,OAAd,aAAcA,OAAd,CACA,cAA8BV,QAAQ,EAAtC,wCAAQW,MAAR,eAAgBC,SAAhB,eACA,eAA8BZ,QAAQ,CAAC,EAAD,CAAtC,yCAAQa,MAAR,eAAgBC,SAAhB,eACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAEA,GAAMY,CAAAA,kBAAkB,0FAAG,iBAAMC,CAAN,kIACvBA,CAAC,CAACC,cAAF,GACMC,WAFiB,CAEHV,IAAI,CAACU,WAFF,CAGvBC,OAAO,CAACC,GAAR,CAAYF,WAAZ,EAHuB,sBAIjBb,CAAAA,kBAAkB,CAACgB,SAAnB,CAA6BH,WAA7B,CAA0CR,MAA1C,EAAkDY,IAAlD,CAAuD,SAACC,GAAD,CAAS,CAClEV,SAAS,CAACU,GAAG,CAACC,IAAJ,CAASZ,MAAV,CAAT,CACH,CAFK,EAEHa,KAFG,CAEG,SAACC,GAAD,CAAS,CAACP,OAAO,CAACC,GAAR,CAAYM,GAAZ,EAAiB,CAF9B,CAJiB,uDAAH,kBAAlBX,CAAAA,kBAAkB,4CAAxB,CAQAI,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAuBR,MAAvB,EAEA,GAAMe,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CACzBd,QAAQ,CAAC,SAAD,CAAY,CAACe,KAAK,CAAE,CAACD,KAAK,CAALA,KAAD,CAAR,CAAZ,CAAR,CACH,CAFD,CAIA,mBACI,sCAEI,aAAK,EAAE,CAAC,YAAR,wBACI,qCACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,QAAxB,CAAiC,WAAW,CAAC,QAA7C,CAAsD,KAAK,CAAElB,MAA7D,CAAqE,QAAQ,CAAE,kBAAAM,CAAC,QAAIL,CAAAA,SAAS,CAACK,CAAC,CAACc,MAAF,CAASC,KAAV,CAAb,EAAhF,EADJ,cAEI,eAAQ,EAAE,CAAC,QAAX,CACI,OAAO,CAAEhB,kBADb,uBAGI,aAAM,KAAK,CAAC,2BAAZ,oBAHJ,EAFJ,GADJ,cAWI,YAAK,EAAE,CAAC,gBAAR,UACKH,MAAM,CAACoB,GAAP,CAAW,SAACJ,KAAD,CAAW,CACnB,mBACI,KAAC,aAAD,EAAe,KAAK,CAAEA,KAAtB,CAA4C,SAAS,CAAED,SAAvD,EAAkCC,KAAK,CAACK,EAAxC,CADJ,CAGH,CAJA,CADL,EAXJ,GAFJ,EADJ,CAwBH"},"metadata":{},"sourceType":"module"}